(this.webpackJsonpredux_lesson=this.webpackJsonpredux_lesson||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(19),l=a.n(n),i=a(8),o=(a(30),a(12)),s=a(3);var d=()=>{const e=Object(i.c)(e=>e.cart.items),[t,a]=Object(c.useState)(!1),n=Object(i.b)(),l=e.reduce((e,t)=>e+t.quantity,0);return r.a.createElement("div",{className:"ui fixed menu",style:{padding:"0 20px"}},r.a.createElement("div",{className:"ui container center",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",height:"60px"}},r.a.createElement("h2",null,r.a.createElement("a",{href:"/",style:{color:"inherit",textDecoration:"none"}},"FakeShop \u2014 practicing with Redux store. Cart state is stored in localStorage \ud83c\udfaf")),r.a.createElement("div",{style:{position:"relative",cursor:"pointer",marginTop:"10px"},onClick:()=>a(!t)},r.a.createElement("i",{className:"shopping cart icon large"}),l>0&&r.a.createElement("div",{style:{position:"absolute",top:"-5px",right:"-10px",background:"red",color:"white",borderRadius:"50%",padding:"4px 7px",fontSize:"12px"}},l),t&&r.a.createElement("div",{style:{position:"absolute",top:"40px",right:0,width:"300px",background:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",zIndex:10}},r.a.createElement("h4",{style:{marginBottom:"10px"}},"Cart:"),0===e.length?r.a.createElement("p",null,"Empty"):r.a.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},e.map(e=>r.a.createElement("li",{key:e.productId,style:{display:"flex",alignItems:"center",marginBottom:"10px",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},e.image&&r.a.createElement("img",{src:e.image,alt:e.title||"product",style:{width:"40px",height:"40px",objectFit:"contain",marginRight:"10px",border:"1px solid #eee",borderRadius:"4px"}}),r.a.createElement("span",{style:{fontSize:"14px"}},e.title||"Product ID ".concat(e.productId)," \u2014 ",e.quantity," \u0448\u0442.")),r.a.createElement("button",{onClick:t=>{t.stopPropagation(),n({type:"REMOVE_FROM_CART",payload:{productId:e.productId}})},style:{background:"transparent",border:"none",color:"#999",fontSize:"16px",cursor:"pointer",marginLeft:"10px"},title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"\xd7"))))))))},m=a(37);const p="SET_PRODUCTS",u="SELECTED_PRODUCT",E="REMOVE_SELECTED_PRODUCT";var g=()=>{const e=Object(i.c)(e=>e.allProducts.products).map(e=>{const{id:t,title:a,image:c,price:n,category:l}=e;return r.a.createElement("div",{className:"card",key:t},r.a.createElement(o.b,{to:"/product/".concat(t),className:"ui link"},r.a.createElement("div",{className:"image ui "},r.a.createElement("img",{src:c,alt:a})),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},a),r.a.createElement("div",{className:"meta price"},"$ ",n),r.a.createElement("div",{className:"meta"},l))))});return r.a.createElement("div",{className:"ui four stackable cards",style:{marginTop:"30px"}},e)};var b=()=>{Object(i.c)(e=>e.allProducts);const e=Object(i.b)(),t=Object(c.useCallback)(async()=>{try{const t=await m.a.get("https://fakestoreapi.com/products");e((e=>({type:p,payload:e}))(t.data))}catch(t){console.log("Err",t)}},[e]);return Object(c.useEffect)(()=>{t()},[t]),r.a.createElement("div",{className:"ui grid container",style:{marginTop:"30px"}},r.a.createElement(g,null))};var y=()=>{const e=Object(i.c)(e=>e.product),{image:t,title:a,price:n,category:l,description:o}=e,{productId:d}=Object(s.r)(),p=Object(i.b)();Object(c.useEffect)(()=>(d&&""!==d&&(async()=>{try{const e=await m.a.get("https://fakestoreapi.com/products/".concat(d));p((e=>({type:u,payload:e}))(e.data))}catch(e){console.log("Error",e)}})(),()=>{p({type:E})}),[d,p]);return r.a.createElement("div",{className:"ui grid container",style:{marginTop:"30px"}},0===Object.keys(e).length?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"ui placeholder segment"},r.a.createElement("div",{className:"ui two column stackable center aligned grid"},r.a.createElement("div",{className:"ui vertical divider"}),r.a.createElement("div",{className:"middle aligned row"},r.a.createElement("div",{className:"column lp"},r.a.createElement("img",{className:"ui fluid image",src:t,alt:a})),r.a.createElement("div",{className:"column rp"},r.a.createElement("h1",null,a),r.a.createElement("h2",null,r.a.createElement("a",{className:"ui teal tag label"},"$",n)),r.a.createElement("h3",{style:{textTransform:"uppercase",padding:20,border:"2px solid brown",backgroundColor:"#a2a0a03b"},className:"ui brown block"},l),r.a.createElement("p",null,o),r.a.createElement("div",{className:"ui vertical animated button",tabIndex:"0",onClick:()=>(e.id,void p({type:"ADD_TO_CART",payload:{productId:e.id,title:e.title,image:e.image}}))},r.a.createElement("div",{className:"hidden content"},r.a.createElement("i",{className:"shop icon"})),r.a.createElement("div",{className:"visible content"},"Add to Cart")))))))};var h=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(d,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",element:r.a.createElement(b,null)}),r.a.createElement(s.a,{path:"/product/:productId",element:r.a.createElement(y,null)}),r.a.createElement(s.a,{path:"*",element:r.a.createElement("h2",null,"404 Not Found")}))))},v=a(21),x=a(6),O=a(5);const f={products:[]},j={items:[]};var N=Object(x.b)({allProducts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;const{type:a,payload:c}=t;switch(a){case p:return Object(O.a)(Object(O.a)({},e),{},{products:c});default:return e}},product:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:a}=arguments.length>1?arguments[1]:void 0;switch(t){case u:return Object(O.a)(Object(O.a)({},e),a);case E:return{};default:return e}},cart:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return e.items.find(e=>e.productId===t.payload.productId)?Object(O.a)(Object(O.a)({},e),{},{items:e.items.map(e=>e.productId===t.payload.productId?Object(O.a)(Object(O.a)({},e),{},{quantity:e.quantity+1}):e)}):Object(O.a)(Object(O.a)({},e),{},{items:[...e.items,{productId:t.payload.productId,quantity:1,image:t.payload.image,title:t.payload.title}]});case"REMOVE_FROM_CART":return Object(O.a)(Object(O.a)({},e),{},{items:e.items.filter(e=>e.productId!==t.payload.productId)});case"CLEAR_CART":return Object(O.a)(Object(O.a)({},e),{},{items:[]});default:return e}}});const I=(()=>{try{const e=localStorage.getItem("cart");if(null===e)return;return{cart:JSON.parse(e)}}catch(e){return void console.warn("loadState error",e)}})(),w=Object(v.a)({reducer:N,preloadedState:I,devTools:!0});w.subscribe(()=>{(e=>{try{const t=JSON.stringify(e.cart);localStorage.setItem("cart",t)}catch(t){console.warn("saveState error",t)}})(w.getState())});var C=w;l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:C},r.a.createElement(h,null))))}},[[23,1,2]]]);
//# sourceMappingURL=main.f98a0758.chunk.js.map